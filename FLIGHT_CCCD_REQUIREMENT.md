# Flight Passenger CCCD Requirement Update

## Overview

C·∫≠p nh·∫≠t y√™u c·∫ßu CCCD/CMND cho h√†nh kh√°ch theo quy ƒë·ªãnh th·ª±c t·∫ø c·ªßa ng√†nh h√†ng kh√¥ng: ch·ªâ y√™u c·∫ßu CCCD cho ng∆∞·ªùi l·ªõn, tr·∫ª em v√† em b√© kh√¥ng c·∫ßn CCCD.

## Thay ƒê·ªïi Ch√≠nh S√°ch

### ‚ùå Tr∆∞·ªõc ƒë√¢y

- **T·∫•t c·∫£ h√†nh kh√°ch** (ng∆∞·ªùi l·ªõn, tr·∫ª em, em b√©) ƒë·ªÅu b·∫Øt bu·ªôc ph·∫£i c√≥ CCCD/CMND
- Form hi·ªÉn th·ªã field CCCD cho t·∫•t c·∫£ lo·∫°i h√†nh kh√°ch
- Backend validation y√™u c·∫ßu `identityNumber` cho m·ªçi FlightPassenger

### ‚úÖ Hi·ªán t·∫°i

- **Ch·ªâ ng∆∞·ªùi l·ªõn (‚â•12 tu·ªïi)** b·∫Øt bu·ªôc ph·∫£i c√≥ CCCD/CMND
- **Tr·∫ª em (2-11 tu·ªïi)**: Kh√¥ng y√™u c·∫ßu CCCD
- **Em b√© (<2 tu·ªïi)**: Kh√¥ng y√™u c·∫ßu CCCD

## Ph√¢n Lo·∫°i H√†nh Kh√°ch

| Lo·∫°i         | ƒê·ªô tu·ªïi   | CCCD/CMND         | L√Ω do                                         |
| ------------ | --------- | ----------------- | --------------------------------------------- |
| üë® Ng∆∞·ªùi l·ªõn | ‚â• 12 tu·ªïi | ‚úÖ **B·∫Øt bu·ªôc**   | C·∫ßn gi·∫•y t·ªù t√πy th√¢n ƒë·ªÉ ki·ªÉm tra an ninh      |
| üëß Tr·∫ª em    | 2-11 tu·ªïi | ‚ùå Kh√¥ng b·∫Øt bu·ªôc | C√≥ th·ªÉ d√πng gi·∫•y khai sinh, ƒëi c√πng ng∆∞·ªùi l·ªõn |
| üë∂ Em b√©     | < 2 tu·ªïi  | ‚ùå Kh√¥ng b·∫Øt bu·ªôc | Qu√° nh·ªè, ch∆∞a c√≥ CCCD, ƒëi c√πng ng∆∞·ªùi l·ªõn      |

## Code Changes

### 1. Frontend - Validation Logic (`bookingflight/page.tsx`)

#### ‚ùå Before:

```typescript
const hasEmptyFields = passengers.some((passenger, index) => {
  if (index === 0) {
    return (
      !passenger.fullName.trim() ||
      !passenger.phoneNumber?.trim() ||
      !passenger.email?.trim() ||
      !passenger.gender.trim() ||
      !passenger.dateOfBirth.trim() ||
      !passenger.identityNumber?.trim() // ‚ùå B·∫Øt bu·ªôc cho t·∫•t c·∫£
    );
  }
  return (
    !passenger.fullName.trim() ||
    !passenger.gender.trim() ||
    !passenger.dateOfBirth.trim() ||
    !passenger.identityNumber?.trim() // ‚ùå B·∫Øt bu·ªôc cho t·∫•t c·∫£
  );
});
```

#### ‚úÖ After:

```typescript
const hasEmptyFields = passengers.some((passenger, index) => {
  // First passenger (contact person - always adult)
  if (index === 0) {
    return (
      !passenger.fullName.trim() ||
      !passenger.phoneNumber?.trim() ||
      !passenger.email?.trim() ||
      !passenger.gender.trim() ||
      !passenger.dateOfBirth.trim() ||
      !passenger.identityNumber?.trim() // ‚úÖ B·∫Øt bu·ªôc v√¨ l√† ng∆∞·ªùi l·ªõn
    );
  }

  // Other passengers
  // Adults need CCCD, but children and infants don't
  const isAdult = index < adults;
  if (isAdult) {
    return (
      !passenger.fullName.trim() ||
      !passenger.gender.trim() ||
      !passenger.dateOfBirth.trim() ||
      !passenger.identityNumber?.trim() // ‚úÖ B·∫Øt bu·ªôc cho ng∆∞·ªùi l·ªõn
    );
  } else {
    // Children and infants don't need CCCD
    return (
      !passenger.fullName.trim() ||
      !passenger.gender.trim() ||
      !passenger.dateOfBirth.trim()
      // ‚úÖ Kh√¥ng check identityNumber cho tr·∫ª em v√† em b√©
    );
  }
});
```

### 2. Frontend - Form Display

#### Conditional CCCD Field:

```typescript
{
  /* CCCD - Only for adults */
}
{
  passengerType === "adult" && (
    <div className="lg:col-span-1">
      <label className="block font-semibold mb-1 text-gray-700">
        CCCD/CMND *
      </label>
      <input
        type="text"
        className="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-400"
        value={passenger.identityNumber || ""}
        onChange={(e) =>
          updatePassenger(index, "identityNumber", e.target.value)
        }
        placeholder="Nh·∫≠p s·ªë CCCD/CMND (9 ho·∫∑c 12 s·ªë)"
        required
      />
    </div>
  );
}
```

### 3. Frontend - Initialize Passengers

```typescript
// Add adults (require CCCD)
for (let i = 0; i < adults; i++) {
  passengerList.push({
    fullName: i === 0 && user?.fullName ? user.fullName : "",
    phoneNumber: i === 0 && user?.phone ? user.phone : undefined,
    email: i === 0 && user?.email ? user.email : undefined,
    gender: "Nam",
    dateOfBirth: "",
    identityNumber: "", // ‚úÖ Required for adults
    nationality: "Vietnam"
  });
}

// Add children (no CCCD needed)
for (let i = 0; i < children; i++) {
  passengerList.push({
    fullName: "",
    gender: "Nam",
    dateOfBirth: "",
    identityNumber: undefined, // ‚úÖ Not required for children
    nationality: "Vietnam"
  });
}

// Add infants (no CCCD needed)
for (let i = 0; i < infants; i++) {
  passengerList.push({
    fullName: "",
    gender: "Nam",
    dateOfBirth: "",
    identityNumber: undefined, // ‚úÖ Not required for infants
    nationality: "Vietnam"
  });
}
```

### 4. Backend - Model Update (`FlightPassenger.js`)

#### ‚ùå Before:

```javascript
identityNumber: {
    type: String,
    required: true, // ‚ùå B·∫Øt bu·ªôc cho t·∫•t c·∫£
    trim: true,
    validate: {
        validator: function (v) {
            return v && /^\d{9}$|^\d{12}$/.test(v);
        },
        message: 'CCCD/CMND ph·∫£i c√≥ 9 ho·∫∑c 12 s·ªë'
    }
}
```

#### ‚úÖ After:

```javascript
identityNumber: {
    type: String,
    required: false, // ‚úÖ Kh√¥ng b·∫Øt bu·ªôc (optional)
    trim: true,
    validate: {
        validator: function (v) {
            // If provided, must be 9 or 12 digits
            // If empty/null/undefined, it's valid (for children and infants)
            if (!v) return true; // ‚úÖ Cho ph√©p empty
            return /^\d{9}$|^\d{12}$/.test(v);
        },
        message: 'CCCD/CMND ph·∫£i c√≥ 9 ho·∫∑c 12 s·ªë'
    }
}
```

### 5. Type Definition (`bookingFlightService.ts`)

Type ƒë√£ support optional t·ª´ ƒë·∫ßu - kh√¥ng c·∫ßn thay ƒë·ªïi:

```typescript
export interface PassengerInfo {
  fullName: string;
  phoneNumber?: string;
  email?: string;
  gender: "Nam" | "N·ªØ";
  dateOfBirth: string;
  identityNumber?: string; // ‚úÖ Optional t·ª´ ƒë·∫ßu
  seatNumber?: string;
  nationality?: string;
}
```

## UI Changes

### Form Layout

**Ng∆∞·ªùi l·ªõn (Adult):**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [Ng∆∞·ªùi l·ªõn 1] (Ng∆∞·ªùi li√™n h·ªá)                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ H·ªç v√† t√™n * ‚îÇ Gi·ªõi t√≠nh * ‚îÇ Ng√†y sinh * ‚îÇ CCCD/CMND * ‚îÇ ‚Üê C√≥ CCCD
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ S·ªë ƒëi·ªán tho·∫°i *                                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Email *                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Tr·∫ª em (Child):**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [Tr·∫ª em 1]                                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ H·ªç v√† t√™n * ‚îÇ Gi·ªõi t√≠nh * ‚îÇ Ng√†y sinh * ‚îÇ ‚Üê Kh√¥ng c√≥ CCCD
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Em b√© (Infant):**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [Em b√© 1]                                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ H·ªç v√† t√™n * ‚îÇ Gi·ªõi t√≠nh * ‚îÇ Ng√†y sinh * ‚îÇ ‚Üê Kh√¥ng c√≥ CCCD
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Benefits

### 1. Ph√π H·ª£p Th·ª±c T·∫ø

- ‚úÖ Tr·∫ª em d∆∞·ªõi 12 tu·ªïi th∆∞·ªùng ch∆∞a c√≥ CCCD
- ‚úÖ Em b√© d∆∞·ªõi 2 tu·ªïi ch·∫Øc ch·∫Øn ch∆∞a c√≥ CCCD
- ‚úÖ Gi·∫•y khai sinh c√≥ th·ªÉ d√πng thay th·∫ø cho tr·∫ª em

### 2. User Experience

- ‚úÖ Gi·∫£m s·ªë field ph·∫£i ƒëi·ªÅn
- ‚úÖ Form ƒë∆°n gi·∫£n h∆°n cho gia ƒë√¨nh c√≥ tr·∫ª em
- ‚úÖ Kh√¥ng g√¢y kh√≥ khƒÉn cho ng∆∞·ªùi d√πng

### 3. Compliance

- ‚úÖ Tu√¢n th·ªß quy ƒë·ªãnh th·ª±c t·∫ø c·ªßa h√†ng kh√¥ng
- ‚úÖ T∆∞∆°ng th√≠ch v·ªõi c√°c h√£ng bay qu·ªëc t·∫ø
- ‚úÖ Linh ho·∫°t v·ªõi nhi·ªÅu lo·∫°i gi·∫•y t·ªù

## Validation Rules

### Frontend Validation

1. **Ng∆∞·ªùi l·ªõn (index < adults)**:

   - H·ªç t√™n: Required
   - Gi·ªõi t√≠nh: Required
   - Ng√†y sinh: Required
   - CCCD: **Required** (9 ho·∫∑c 12 s·ªë)
   - Phone/Email: Required (ch·ªâ ng∆∞·ªùi li√™n h·ªá)

2. **Tr·∫ª em (index >= adults && index < adults + children)**:

   - H·ªç t√™n: Required
   - Gi·ªõi t√≠nh: Required
   - Ng√†y sinh: Required
   - CCCD: **Not Required** ‚ùå

3. **Em b√© (index >= adults + children)**:
   - H·ªç t√™n: Required
   - Gi·ªõi t√≠nh: Required
   - Ng√†y sinh: Required
   - CCCD: **Not Required** ‚ùå

### Backend Validation

```javascript
// Model FlightPassenger
{
  fullName: { required: true },
  gender: { required: true },
  dateOfBirth: { required: true },
  identityNumber: {
    required: false, // ‚úÖ Optional
    validate: {
      validator: function(v) {
        if (!v) return true; // ‚úÖ OK n·∫øu empty
        return /^\d{9}$|^\d{12}$/.test(v); // ‚úÖ N·∫øu c√≥ th√¨ ph·∫£i ƒë√∫ng format
      }
    }
  }
}
```

## Testing Scenarios

### Scenario 1: Gia ƒë√¨nh - 2 Ng∆∞·ªùi l·ªõn + 1 Tr·∫ª em + 1 Em b√©

**Form Fields:**

1. Ng∆∞·ªùi l·ªõn 1 (Li√™n h·ªá):

   - H·ªç t√™n ‚úÖ
   - Gi·ªõi t√≠nh ‚úÖ
   - Ng√†y sinh ‚úÖ
   - **CCCD ‚úÖ** (Required)
   - S·ªë ƒëi·ªán tho·∫°i ‚úÖ
   - Email ‚úÖ

2. Ng∆∞·ªùi l·ªõn 2:

   - H·ªç t√™n ‚úÖ
   - Gi·ªõi t√≠nh ‚úÖ
   - Ng√†y sinh ‚úÖ
   - **CCCD ‚úÖ** (Required)

3. Tr·∫ª em 1:

   - H·ªç t√™n ‚úÖ
   - Gi·ªõi t√≠nh ‚úÖ
   - Ng√†y sinh ‚úÖ
   - **Kh√¥ng c√≥ CCCD** ‚ùå

4. Em b√© 1:
   - H·ªç t√™n ‚úÖ
   - Gi·ªõi t√≠nh ‚úÖ
   - Ng√†y sinh ‚úÖ
   - **Kh√¥ng c√≥ CCCD** ‚ùå

**Validation Result:** ‚úÖ Pass

### Scenario 2: Ch·ªâ ng∆∞·ªùi l·ªõn - 2 Ng∆∞·ªùi l·ªõn

**Form Fields:**

1. Ng∆∞·ªùi l·ªõn 1: ƒê·∫ßy ƒë·ªß + **CCCD** ‚úÖ
2. Ng∆∞·ªùi l·ªõn 2: ƒê·∫ßy ƒë·ªß + **CCCD** ‚úÖ

**Validation Result:** ‚úÖ Pass

### Scenario 3: Ng∆∞·ªùi l·ªõn kh√¥ng nh·∫≠p CCCD

**Form Fields:**

1. Ng∆∞·ªùi l·ªõn 1: ƒê·∫ßy ƒë·ªß nh∆∞ng **thi·∫øu CCCD** ‚ùå

**Validation Result:** ‚ùå Fail
**Error:** "Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin t·∫•t c·∫£ h√†nh kh√°ch!"

### Scenario 4: Tr·∫ª em v·ªõi CCCD (optional)

**Form Fields:**

1. Ng∆∞·ªùi l·ªõn 1: ƒê·∫ßy ƒë·ªß + CCCD ‚úÖ
2. Tr·∫ª em 1: ƒê·∫ßy ƒë·ªß + **c√≥ nh·∫≠p CCCD** ‚úÖ

**Validation Result:** ‚úÖ Pass (CCCD optional nh∆∞ng n·∫øu nh·∫≠p th√¨ v·∫´n ƒë∆∞·ª£c)

## Database Impact

### Migration Status

- ‚úÖ **No migration needed**
- Existing data v·∫´n h·ª£p l·ªá
- Model ƒë√£ update `required: false`
- Old bookings with all CCCD filled: Still valid
- New bookings without children/infant CCCD: Valid

### Backward Compatibility

- ‚úÖ Old bookings: V·∫´n hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß CCCD n·∫øu c√≥
- ‚úÖ New bookings: Ch·∫•p nh·∫≠n empty CCCD cho tr·∫ª em/em b√©
- ‚úÖ API kh√¥ng thay ƒë·ªïi structure
- ‚úÖ Frontend v·∫´n g·ª≠i ƒë√∫ng format

## API Payload Example

### Example 1: Family Booking

```json
{
  "flightId": "flight_123",
  "passengers": [
    {
      "fullName": "Nguy·ªÖn VƒÉn A",
      "gender": "Nam",
      "dateOfBirth": "1990-01-01",
      "identityNumber": "001234567890", // ‚úÖ Adult has CCCD
      "phoneNumber": "0901234567",
      "email": "nguyenvana@example.com"
    },
    {
      "fullName": "Nguy·ªÖn VƒÉn B",
      "gender": "Nam",
      "dateOfBirth": "1992-05-15",
      "identityNumber": "009876543210" // ‚úÖ Adult has CCCD
    },
    {
      "fullName": "Nguy·ªÖn Th·ªã C",
      "gender": "N·ªØ",
      "dateOfBirth": "2018-03-20"
      // ‚úÖ Child - No identityNumber field
    },
    {
      "fullName": "Nguy·ªÖn VƒÉn D",
      "gender": "Nam",
      "dateOfBirth": "2024-08-10"
      // ‚úÖ Infant - No identityNumber field
    }
  ]
}
```

### Example 2: Only Adults

```json
{
  "flightId": "flight_123",
  "passengers": [
    {
      "fullName": "Tr·∫ßn Th·ªã E",
      "gender": "N·ªØ",
      "dateOfBirth": "1995-12-01",
      "identityNumber": "001122334455", // ‚úÖ Required
      "phoneNumber": "0912345678",
      "email": "tranthie@example.com"
    },
    {
      "fullName": "L√™ VƒÉn F",
      "gender": "Nam",
      "dateOfBirth": "1998-07-20",
      "identityNumber": "005544332211" // ‚úÖ Required
    }
  ]
}
```

## Summary

| Aspect                | Before              | After                     |
| --------------------- | ------------------- | ------------------------- |
| **CCCD for Adults**   | ‚úÖ Required         | ‚úÖ Required               |
| **CCCD for Children** | ‚úÖ Required         | ‚ùå Not Required           |
| **CCCD for Infants**  | ‚úÖ Required         | ‚ùå Not Required           |
| **Form Fields**       | Same for all        | Conditional based on type |
| **Validation**        | All must have CCCD  | Only adults need CCCD     |
| **Backend Model**     | `required: true`    | `required: false`         |
| **User Experience**   | More fields to fill | Simpler for families      |
| **Compliance**        | Too strict          | Realistic & flexible      |

## Related Documentation

- [FLIGHT_AGE_BASED_PRICING.md](./FLIGHT_AGE_BASED_PRICING.md) - Ch√≠nh s√°ch gi√° v√© theo ƒë·ªô tu·ªïi
- [FLIGHT_CLASS_DYNAMIC_DISPLAY.md](./FLIGHT_CLASS_DYNAMIC_DISPLAY.md) - Hi·ªÉn th·ªã ƒë·ªông h·∫°ng v√©

---

**Last Updated:** October 19, 2025
**Status:** ‚úÖ Production Ready
**Breaking Changes:** ‚ùå None (Backward compatible)
